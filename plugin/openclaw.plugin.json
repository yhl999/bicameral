{
  "id": "bicameral",
  "name": "bicameral",
  "version": "0.1.0",
  "description": "Bicameral runtime context injection plugin",
  "entry": "index.ts",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "graphitiBaseUrl": {
        "type": "string"
      },
      "graphitiApiKey": {
        "type": "string"
      },
      "providerOverride": {
        "type": "string"
      },
      "modelOverride": {
        "type": "string"
      },
      "allowModelRoutingOverride": {
        "type": "boolean"
      },
      "allowedProviderOverrides": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "allowedModelOverrides": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "maxOverrideTokenLength": {
        "type": "number"
      },
      "recallTimeoutMs": {
        "type": "number"
      },
      "captureTimeoutMs": {
        "type": "number"
      },
      "maxFacts": {
        "type": "number"
      },
      "memoryGroupId": {
        "type": "string",
        "minLength": 1
      },
      "memoryGroupIds": {
        "type": "array",
        "items": {
          "type": "string",
          "minLength": 1
        },
        "description": "Multi-lane group IDs for singleTenant deployments. When non-empty and singleTenant=true, recall fans out across all listed lanes (sessions, OM, self-audit, etc.). Takes precedence over memoryGroupId. Duplicates and empty entries are stripped during normalization. Example: [\"s1_sessions_main\", \"s1_observational_memory\", \"learning_self_audit\"]"
      },
      "minPromptChars": {
        "type": "number"
      },
      "enableSticky": {
        "type": "boolean"
      },
      "stickyMaxWords": {
        "type": "number"
      },
      "stickySignals": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "intentRulesPath": {
        "type": "string"
      },
      "compositionRulesPath": {
        "type": "string"
      },
      "packRegistryPath": {
        "type": "string"
      },
      "packRouterCommand": {
        "oneOf": [
          {
            "type": "string"
          },
          {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        ]
      },
      "packRouterRepoRoot": {
        "type": "string"
      },
      "packRouterTimeoutMs": {
        "type": "number"
      },
      "defaultMinConfidence": {
        "type": "number"
      },
      "singleTenant": {
        "type": "boolean"
      },
      "debug": {
        "type": "boolean"
      },
      "configPathRoots": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "trustedGroupIds": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "enableCapabilityInjection": {
        "type": "boolean",
        "description": "Enable per-turn capability subset injection."
      },
      "capabilitySelectorCommand": {
        "oneOf": [
          { "type": "string" },
          { "type": "array", "items": { "type": "string" } }
        ],
        "description": "Command to run the capability subset selector."
      },
      "capabilityIndexPath": {
        "type": "string",
        "description": "Path to capability-index.json."
      },
      "capabilityOverridesPath": {
        "type": "string",
        "description": "Path to capability_intent_overrides.json."
      },
      "capabilitySelectorTimeoutMs": {
        "type": "number",
        "description": "Timeout for capability selector (ms)."
      },
      "capabilityTopN": {
        "type": "number",
        "description": "Number of Top-N capabilities to inject per turn."
      },
      "capabilityRequireIntent": {
        "type": "boolean",
        "description": "Only inject capabilities when a pack intent is detected."
      },
      "capabilityMinScore": {
        "type": "number",
        "description": "Minimum capability score threshold for inclusion."
      }
    }
  },
  "hooks": [
    "before_model_resolve",
    "before_prompt_build",
    "before_agent_start",
    "agent_end"
  ]
}